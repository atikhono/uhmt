%%
%%  APPENDICES FOR THE CHAPTER 2
%%
\chapter{The syntax of the \ak\ syncroniser}

  \section{The full grammar\label{sync_syntax}}
\setlength{\grammarindent}{8em} % increase separation between LHS/RHS
\begin{figure}[h!]
\scriptsize
\begin{grammar}
<sync> ::= `synch' <ID> `(' <input> [`,' <input>]* `|' <output> [`,' <output>]* `)' \\
           `{' <decl>* <state>$^+$ `}'

<input>  ::= <ID> [`:' (<ID> | <NUMBER>)]

<output>  ::= <ID> [`:' <depth\_exp>]

<depth\_exp> ::= <ID> | <NUMBER> | <ID> `+' <NUMBER> | <ID> `-' <NUMBER>

<decl> ::= `store' <id\_list> `;'
        \alt `state' <type> <id\_list> `;'

<type> ::= `int' `(' <NUMBER> `)'
                  \alt `enum' `(' <id\_list> `)'

<state> ::= <ID> `{' `on:' <trans\_stmt>$^+$ [`elseon:' <trans\_stmt>$^+$]* `}'

<trans\_stmt> ::= <ID> [`.' <condition>] [`&' <int\_exp> ] <actions>

<condition> ::= `@' <ID>
             \alt `?' <ID>
             \alt [`?' <ID>] `(' <id\_list> [`||' <ID> ]`)'
             \alt `else'

<actions> ::= `{' [<set\_stmt>] [<send\_stmt>] [<goto\_stmt>] `}'

<set\_stmt> ::= `set' <assign> [`,' <assign>]* `;'

<assign> ::= <ID> `=' (<int\_exp> | <data\_exp>)

<send\_stmt> ::= `send' <dispatch> [`,' <dispatch>]*  `;'

<dispatch> ::= <msg\_exp> `=>' <ID>

<msg\_exp> ::= `@' <ID>
           \alt `@' <int\_exp>
           \alt [`?' <ID>] <data\_exp>
           \alt `nil'

<data\_exp> ::= <data>
             \alt `(' <data> `)'

<data> ::= <item> [`||' <item>]*

<item> ::= `this'
        \alt <ID>
        \alt `\'' <ID>
        \alt <ID> `:' <rhs>

<rhs> ::= <int\_exp>
          \alt <ID>

<goto\_stmt> ::= `goto' <id\_list> `;'

<id\_list> ::= <ID> [`,' <ID>]*

<int\_exp> ::= `[' <int\_exp\_c> `]'
\end{grammar}
\caption{The syntax of the \ak\ synchroniser}
\end{figure}


    \section{The integer expression grammar\label{int_exp_gr}}
\setlength{\grammarindent}{8em} % increase separation between LHS/RHS
\begin{figure}[h!]
\scriptsize
\begin{grammar}
<int\_exp\_c> ::= <NUMBER>
                \alt <ID>
                \alt `(' <int\_exp\_c> `)'
                \alt <int\_exp\_c> `+' <int\_exp\_c>
                \alt <int\_exp\_c> `-' <int\_exp\_c>
                \alt <int\_exp\_c> `*' <int\_exp\_c>
                \alt <int\_exp\_c> `/' <int\_exp\_c>
                \alt <int\_exp\_c> `\%' <int\_exp\_c>
                \alt <int\_exp\_c> `<<' <int\_exp\_c>
                \alt <int\_exp\_c> `>>' <int\_exp\_c>
                \alt <int\_exp\_c> `|' <int\_exp\_c>
                \alt <int\_exp\_c> `&' <int\_exp\_c>
                \alt <int\_exp\_c> `^' <int\_exp\_c>
                \alt `-' <int\_exp\_c> %prec UMINUS
                \alt <int\_exp\_c> `<' <int\_exp\_c>
                \alt <int\_exp\_c> `>' <int\_exp\_c>
                \alt <int\_exp\_c> `==' <int\_exp\_c>
                \alt <int\_exp\_c> `!=' <int\_exp\_c>
                \alt <int\_exp\_c> `<=' <int\_exp\_c>
                \alt <int\_exp\_c> `>=' <int\_exp\_c>
                \alt `!' <int\_exp\_c>
                \alt <int\_exp\_c> `&&' <int\_exp\_c>
                \alt <int\_exp\_c> `||' <int\_exp\_c>
\end{grammar}
\caption{The syntax of the integer expression in \ak\ synchroniser}
\end{figure}


    \section{Keywords, reserved words and punctuation\label{sync_kw}}
The keywords, the reserved words and the punctuation used in the \ak\ synchroniser syntax are given in Fig. \ref{sync_kw}.
\begin{figure}[h!]
\centering
\begin{tabular}{|c|p{0.7\textwidth}|}
\hline
Keywords & synch, store, state, int, enum, start, on, elseon, else, do, send, goto\\
\hline
Reserved words & nil, this\\
\hline
Punctuation & braces, brackets, parantheses, the comma, the dot, the semicolon, the plus sign, the minus sign, the ampersand, the at sign, the question mark, the bar-bar sign, the equality sign, the arrow\\
\hline
\end{tabular}
\caption{\ak\ synchroniser keywords, reserved words and punctiation}
\end{figure}
